{% extends '_layouts/cp' %}
{% set title = "Entries"|t %}

{% do view.registerAssetBundle("Wheelform\\assets\\WheelformCpAsset") %}

{% set crumbs = [
    { label: 'Wheel Form', url: url('wheelform') },
] %}

{% set content %}
<div class="tableview">
    {% if entries is not empty %}
    <div class="clearfix">
        {{ pager | raw }}
    </div>
        <table class="data fullwidth">
            <thead>
                <tr>
                    <th scope="col" data-attribute="View">
                        View Message
                    </th>
                    {% if headerFields is not empty %}
                        {% for h in headerFields %}
                            <th>{{h.getLabel()}}</th>
                        {% endfor %}
                    {% endif %}
                    <th scope="col" data-attribute="dateSubmitted" class="text-right">
                        Date Submitted
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                    <tr data-id="{{ entry.id }}">
                        <td><a href="{{ url('wheelform/entry/' ~ entry.id)}}">View</a></td>
                        {% if headerFields is not empty %}
                            {% for field in headerFields %}
                                {% for value in entry.value %}
                                    {% if value.field_id == field.id %}
                                        <td>{{value.value}}</td>
                                    {% endif %}
                                {% else %}
                                    <td>No Value found</td>
                                {% endfor %}
                            {% endfor %}
                        {% endif %}
                        <td class="text-right">{{ entry.dateCreated | date('d-m-Y h:i a') }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No Entries</p>
    {% endif %}
</div>
{% endset %}
